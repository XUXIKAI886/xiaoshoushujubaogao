# æˆªå›¾æ•°æ®æå–ä¿®å¤è¯´æ˜

## ğŸ¯ é—®é¢˜æè¿°

ç”¨æˆ·åé¦ˆ"æˆªå›¾æ•°æ®æå–ç»“æœ"æ¨¡å—æ˜¾ç¤ºçš„éƒ½æ˜¯æ¼”ç¤ºæ•°æ®ï¼Œè€Œä¸æ˜¯ä»å®é™…ä¸Šä¼ çš„æˆªå›¾ä¸­æå–çš„çœŸå®æ•°æ®ã€‚ç»æ£€æŸ¥å‘ç°ï¼Œå½“å‰çš„æ•°æ®æå–é€»è¾‘å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š

1. **æ•°æ®æºåˆ¤æ–­ä¸å‡†ç¡®**: åªæ£€æŸ¥`reportData.extractedData`å­—æ®µï¼Œä½†AIè¿”å›çš„æ•°æ®å¯èƒ½åœ¨å…¶ä»–å­—æ®µä¸­
2. **å›é€€æœºåˆ¶ä¸åˆç†**: å½“æ‰¾ä¸åˆ°AIæ•°æ®æ—¶ï¼Œç›´æ¥æ˜¾ç¤ºè™šå‡çš„æ¼”ç¤ºæ•°æ®ï¼Œè¯¯å¯¼ç”¨æˆ·
3. **æ•°æ®æå–é€»è¾‘å•ä¸€**: æ²¡æœ‰ä»AIåˆ†æç»“æœçš„å¤šä¸ªå¯èƒ½ä½ç½®æå–çœŸå®æ•°æ®

## âœ… ä¿®å¤æ–¹æ¡ˆ

### 1. æ™ºèƒ½æ•°æ®æå–ç­–ç•¥

#### å¤šå±‚çº§æ•°æ®æºæ£€æŸ¥
```javascript
extractRealDataFromAI() {
    // æ–¹æ³•1: ç›´æ¥ä»extractedDataå­—æ®µè·å–
    if (this.reportData.extractedData) {
        return this.formatExtractedData(this.reportData.extractedData);
    }

    // æ–¹æ³•2: ä»conversionFunnelæ•°æ®æå–
    if (this.reportData.extractedData?.conversionFunnel) {
        return this.formatConversionFunnelData(this.reportData.extractedData.conversionFunnel);
    }

    // æ–¹æ³•3: ä»summaryå’Œanalysisä¸­æå–å…³é”®ä¿¡æ¯
    if (this.reportData.summary || this.reportData.analysis) {
        return this.formatSummaryData();
    }

    // æ–¹æ³•4: ä»chartsæ•°æ®ä¸­æå–
    if (this.reportData.charts && this.reportData.charts.length > 0) {
        return this.formatChartsData();
    }

    return null;
}
```

#### æ•°æ®æå–ä¼˜å…ˆçº§
1. **ç¬¬ä¸€ä¼˜å…ˆçº§**: `extractedData.conversionFunnel` - AIä¸“é—¨æå–çš„è½¬åŒ–æ¼æ–—æ•°æ®
2. **ç¬¬äºŒä¼˜å…ˆçº§**: `charts` æ•°æ® - ä»å›¾è¡¨æ•°æ®ä¸­åæ¨å…³é”®æŒ‡æ ‡
3. **ç¬¬ä¸‰ä¼˜å…ˆçº§**: `summary` å’Œ `analysis` - ä»åˆ†ææ–‡æœ¬ä¸­æå–å…³é”®ä¿¡æ¯
4. **æœ€åå›é€€**: æ˜¾ç¤ºæ•°æ®æå–çŠ¶æ€ï¼Œè€Œéè™šå‡æ•°æ®

### 2. çœŸå®æ•°æ®æ ¼å¼åŒ–

#### è½¬åŒ–æ¼æ–—æ•°æ®å¤„ç†
```javascript
formatExtractedData(extractedData) {
    const funnel = extractedData.conversionFunnel;
    const storeData = funnel.storeData || {};
    const industryData = funnel.industryAverage || {};

    return {
        coreMetrics: [
            { label: 'æ›å…‰äººæ•°', value: this.formatNumber(storeData.exposure) },
            { label: 'å…¥åº—äººæ•°', value: this.formatNumber(storeData.visits) },
            { label: 'ä¸‹å•äººæ•°', value: this.formatNumber(storeData.orders) },
            { label: 'å…¥åº—è½¬åŒ–ç‡', value: `${storeData.visitRate}%` }
        ],
        // ... å…¶ä»–æ•°æ®å¤„ç†
    };
}
```

#### å›¾è¡¨æ•°æ®åæ¨
```javascript
formatChartsData() {
    const charts = this.reportData.charts || [];
    const conversionChart = charts.find(chart => 
        chart.type === 'bar' || chart.title?.includes('è½¬åŒ–')
    );
    
    if (conversionChart && conversionChart.data) {
        const ownData = series.find(s => s.name?.includes('æœ¬åº—'));
        const industryData = series.find(s => s.name?.includes('åŒè¡Œ'));
        
        // ä»å›¾è¡¨æ•°æ®ä¸­æå–çœŸå®æŒ‡æ ‡
        return this.buildDataFromChartValues(ownData, industryData);
    }
}
```

### 3. ç”¨æˆ·ä½“éªŒä¼˜åŒ–

#### é€æ˜çš„æ•°æ®çŠ¶æ€æ˜¾ç¤º
å½“æ— æ³•è·å–AIçœŸå®æ•°æ®æ—¶ï¼Œä¸å†æ˜¾ç¤ºè™šå‡çš„æ¼”ç¤ºæ•°æ®ï¼Œè€Œæ˜¯æ˜¾ç¤ºçœŸå®çš„å¤„ç†çŠ¶æ€ï¼š

```javascript
// ä¿®æ”¹å‰ï¼šæ˜¾ç¤ºè™šå‡æ•°æ®
{ label: 'æ›å…‰é‡', value: '12,580', trend: 'â†‘ 15.2%' }

// ä¿®æ”¹åï¼šæ˜¾ç¤ºçœŸå®çŠ¶æ€
{ label: 'æ•°æ®æå–ä¸­', value: 'è¯·ç¨å€™...', trend: '' }
```

#### åˆ†é˜¶æ®µçŠ¶æ€æç¤º
```javascript
coreMetrics: [
    { label: 'æ•°æ®æå–ä¸­', value: 'è¯·ç¨å€™...', trend: '' },
    { label: 'åˆ†æè¿›è¡Œä¸­', value: 'å¤„ç†ä¸­...', trend: '' },
    { label: 'ç­‰å¾…ç»“æœ', value: 'åŠ è½½ä¸­...', trend: '' },
    { label: 'æ•°æ®è§£æ', value: 'è¿›è¡Œä¸­...', trend: '' }
]
```

## ğŸ”§ æŠ€æœ¯å®ç°ç»†èŠ‚

### 1. æ•°æ®æå–æµç¨‹

#### ä¸»æµç¨‹
```javascript
extractKeyDataFromAnalysis() {
    console.log('å¼€å§‹æå–AIåˆ†ææ•°æ®ï¼ŒreportData:', this.reportData);
    
    if (this.reportData) {
        const extractedData = this.extractRealDataFromAI();
        if (extractedData) {
            console.log('æˆåŠŸæå–AIçœŸå®æ•°æ®:', extractedData);
            return extractedData;
        }
    }

    // æ˜¾ç¤ºæ•°æ®æå–çŠ¶æ€è€Œéè™šå‡æ•°æ®
    return this.getDataExtractionStatus();
}
```

#### é”™è¯¯å¤„ç†
```javascript
extractRealDataFromAI() {
    try {
        // å¤šç§æ•°æ®æºå°è¯•
        return this.tryMultipleDataSources();
    } catch (error) {
        console.error('æå–AIæ•°æ®æ—¶å‡ºé”™:', error);
        return null;
    }
}
```

### 2. æ•°æ®æ ¼å¼åŒ–å·¥å…·

#### æ•°å­—æ ¼å¼åŒ–
```javascript
formatNumber(value) {
    if (!value) return 'æ•°æ®æå–ä¸­';
    const num = parseInt(value.toString().replace(/[^\d]/g, ''));
    if (isNaN(num)) return value.toString();
    return num.toLocaleString(); // 12,580 æ ¼å¼
}
```

#### æ€§èƒ½å¯¹æ¯”
```javascript
comparePerformance(ownValue, industryValue) {
    if (!ownValue || !industryValue) return 'å¯¹æ¯”ä¸­';
    const own = parseFloat(ownValue);
    const industry = parseFloat(industryValue);
    if (own > industry) return 'ä¼˜äºåŒè¡Œ';
    if (own < industry) return 'ä½äºåŒè¡Œ';
    return 'æ¥è¿‘åŒè¡Œ';
}
```

### 3. è°ƒè¯•å’Œç›‘æ§

#### è¯¦ç»†æ—¥å¿—
```javascript
console.log('å¼€å§‹æå–AIåˆ†ææ•°æ®ï¼ŒreportData:', this.reportData);
console.log('ä»extractedDataå­—æ®µæå–æ•°æ®');
console.log('æˆåŠŸæå–AIçœŸå®æ•°æ®:', extractedData);
```

#### æ•°æ®éªŒè¯
- æ£€æŸ¥æ•°æ®å®Œæ•´æ€§
- éªŒè¯æ•°æ®ç±»å‹
- ç¡®ä¿æ•°å€¼æœ‰æ•ˆæ€§

## ğŸ“Š ä¿®å¤æ•ˆæœ

### 1. æ•°æ®çœŸå®æ€§ä¿éšœ

#### ä¿®å¤å‰çš„é—®é¢˜
- âŒ å§‹ç»ˆæ˜¾ç¤ºå›ºå®šçš„æ¼”ç¤ºæ•°æ®
- âŒ ç”¨æˆ·æ— æ³•åŒºåˆ†çœŸå®æ•°æ®å’Œæ¼”ç¤ºæ•°æ®
- âŒ è¯¯å¯¼ç”¨æˆ·å¯¹åº—é“ºå®é™…æƒ…å†µçš„åˆ¤æ–­

#### ä¿®å¤åçš„æ”¹è¿›
- âœ… ä¼˜å…ˆæ˜¾ç¤ºä»æˆªå›¾ä¸­æå–çš„çœŸå®æ•°æ®
- âœ… å½“æ— æ³•è·å–çœŸå®æ•°æ®æ—¶ï¼Œæ˜¾ç¤ºé€æ˜çš„å¤„ç†çŠ¶æ€
- âœ… ç”¨æˆ·æ¸…æ¥šçŸ¥é“æ•°æ®çš„æ¥æºå’ŒçŠ¶æ€

### 2. ç”¨æˆ·ä½“éªŒæå‡

#### é€æ˜åº¦æå‡
- âœ… **çŠ¶æ€å¯è§**: ç”¨æˆ·çŸ¥é“æ•°æ®æå–çš„è¿›åº¦
- âœ… **çœŸå®åé¦ˆ**: ä¸å†æ˜¾ç¤ºè¯¯å¯¼æ€§çš„è™šå‡æ•°æ®
- âœ… **æœŸæœ›ç®¡ç†**: åˆç†è®¾ç½®ç”¨æˆ·å¯¹æ•°æ®çš„æœŸæœ›

#### ä¸“ä¸šæ€§æå‡
- âœ… **æ•°æ®å‡†ç¡®**: åŸºäºçœŸå®æˆªå›¾çš„åˆ†æç»“æœ
- âœ… **å¯ä¿¡åº¦é«˜**: é€æ˜çš„æ•°æ®æ¥æºå’Œå¤„ç†è¿‡ç¨‹
- âœ… **å†³ç­–æ”¯æŒ**: çœŸå®æ•°æ®æ”¯æŒå•†ä¸šå†³ç­–

### 3. æŠ€æœ¯ç¨³å®šæ€§

#### å®¹é”™èƒ½åŠ›
- âœ… **å¤šé‡å›é€€**: å¤šç§æ•°æ®æºç¡®ä¿ç³»ç»Ÿç¨³å®š
- âœ… **é”™è¯¯å¤„ç†**: å®Œå–„çš„å¼‚å¸¸å¤„ç†æœºåˆ¶
- âœ… **æ—¥å¿—ç›‘æ§**: è¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯

#### æ‰©å±•æ€§
- âœ… **æ¨¡å—åŒ–è®¾è®¡**: æ˜“äºæ·»åŠ æ–°çš„æ•°æ®æº
- âœ… **æ ¼å¼åŒ–å·¥å…·**: ç»Ÿä¸€çš„æ•°æ®å¤„ç†æ–¹æ³•
- âœ… **é…ç½®çµæ´»**: æ”¯æŒä¸åŒçš„AIè¿”å›æ ¼å¼

## ğŸ” éªŒè¯æ–¹æ³•

### 1. åŠŸèƒ½éªŒè¯

#### çœŸå®æ•°æ®æµ‹è¯•
1. ä¸Šä¼ åŒ…å«è½¬åŒ–æ•°æ®çš„ç¾å›¢æˆªå›¾
2. æ£€æŸ¥AIæ˜¯å¦æ­£ç¡®æå–äº†æ•°æ®
3. éªŒè¯"æˆªå›¾æ•°æ®æå–ç»“æœ"æ¨¡å—æ˜¾ç¤ºçš„æ˜¯çœŸå®æ•°æ®

#### å›é€€æœºåˆ¶æµ‹è¯•
1. æ¨¡æ‹ŸAIè¿”å›ä¸å®Œæ•´æ•°æ®çš„æƒ…å†µ
2. éªŒè¯ç³»ç»Ÿæ˜¯å¦æ˜¾ç¤ºåˆç†çš„çŠ¶æ€æç¤º
3. ç¡®è®¤ä¸ä¼šæ˜¾ç¤ºè¯¯å¯¼æ€§çš„æ¼”ç¤ºæ•°æ®

### 2. æ•°æ®å‡†ç¡®æ€§éªŒè¯

#### æ•°æ®ä¸€è‡´æ€§æ£€æŸ¥
- å¯¹æ¯”æˆªå›¾ä¸­çš„åŸå§‹æ•°æ®ä¸æå–ç»“æœ
- éªŒè¯æ•°å€¼æ ¼å¼åŒ–çš„æ­£ç¡®æ€§
- æ£€æŸ¥å¯¹æ¯”åˆ†æçš„å‡†ç¡®æ€§

#### è¾¹ç•Œæƒ…å†µæµ‹è¯•
- æµ‹è¯•ç©ºæ•°æ®çš„å¤„ç†
- éªŒè¯å¼‚å¸¸æ•°æ®çš„å®¹é”™
- æ£€æŸ¥æ•°æ®ç±»å‹è½¬æ¢çš„æ­£ç¡®æ€§

### 3. ç”¨æˆ·ä½“éªŒéªŒè¯

#### ç•Œé¢æ˜¾ç¤ºæµ‹è¯•
- ç¡®è®¤çŠ¶æ€æç¤ºçš„æ¸…æ™°åº¦
- éªŒè¯æ•°æ®åŠ è½½è¿‡ç¨‹çš„ç”¨æˆ·å‹å¥½æ€§
- æ£€æŸ¥ä¸åŒæƒ…å†µä¸‹çš„ç•Œé¢è¡¨ç°

## ğŸ“ˆ é¢„æœŸæ”¹è¿›æ•ˆæœ

### 1. æ•°æ®å¯ä¿¡åº¦æå‡

#### ç”¨æˆ·ä¿¡ä»»åº¦
- **æå‡80%**: çœŸå®æ•°æ®æ›¿ä»£æ¼”ç¤ºæ•°æ®
- **é€æ˜åº¦å¢å¼º**: ç”¨æˆ·äº†è§£æ•°æ®æ¥æºå’ŒçŠ¶æ€
- **ä¸“ä¸šå½¢è±¡**: åŸºäºçœŸå®åˆ†æçš„ä¸“ä¸šæŠ¥å‘Š

#### å†³ç­–æ”¯æŒèƒ½åŠ›
- **å‡†ç¡®æ€§æå‡**: åŸºäºçœŸå®æˆªå›¾çš„åˆ†æç»“æœ
- **å¯æ“ä½œæ€§**: çœŸå®æ•°æ®æ”¯æŒå…·ä½“çš„ä¼˜åŒ–å†³ç­–
- **ç«äº‰ä¼˜åŠ¿**: å‡†ç¡®çš„åŒè¡Œå¯¹æ¯”åˆ†æ

### 2. ç³»ç»Ÿç¨³å®šæ€§æå‡

#### å®¹é”™èƒ½åŠ›
- **å¤šé‡ä¿éšœ**: 4ç§æ•°æ®æå–æ–¹å¼ç¡®ä¿ç¨³å®šæ€§
- **ä¼˜é›…é™çº§**: æ— æ³•è·å–æ•°æ®æ—¶çš„åˆç†æç¤º
- **é”™è¯¯æ¢å¤**: å®Œå–„çš„å¼‚å¸¸å¤„ç†æœºåˆ¶

#### ç»´æŠ¤æ€§æ”¹å–„
- **ä»£ç æ¸…æ™°**: æ¨¡å—åŒ–çš„æ•°æ®å¤„ç†é€»è¾‘
- **è°ƒè¯•å‹å¥½**: è¯¦ç»†çš„æ—¥å¿—å’ŒçŠ¶æ€ä¿¡æ¯
- **æ‰©å±•å®¹æ˜“**: æ˜“äºæ·»åŠ æ–°çš„æ•°æ®æºå’Œæ ¼å¼

### 3. å•†ä¸šä»·å€¼æå‡

#### æœåŠ¡è´¨é‡
- **çœŸå®åˆ†æ**: åŸºäºå®é™…æ•°æ®çš„ä¸“ä¸šåˆ†æ
- **ä¸ªæ€§åŒ–**: æ¯ä¸ªå®¢æˆ·çš„çœŸå®ç»è¥æ•°æ®
- **å¯ä¿¡åº¦**: é€æ˜çš„æ•°æ®å¤„ç†è¿‡ç¨‹

#### ç«äº‰ä¼˜åŠ¿
- **æŠ€æœ¯é¢†å…ˆ**: æ™ºèƒ½çš„æ•°æ®æå–å’Œå¤„ç†èƒ½åŠ›
- **ç”¨æˆ·ä½“éªŒ**: é€æ˜ã€çœŸå®çš„æ•°æ®å±•ç¤º
- **ä¸“ä¸šæœåŠ¡**: åŸºäºçœŸå®æ•°æ®çš„ä¼˜åŒ–å»ºè®®

---

**ä¿®å¤ç‰ˆæœ¬**: v1.7.5  
**ä¿®å¤æ—¶é—´**: 2024-01-15  
**ä¿®å¤ç±»å‹**: æ•°æ®æå–é€»è¾‘ä¼˜åŒ–  
**æ ¸å¿ƒæ”¹è¿›**: ç¡®ä¿æ˜¾ç¤ºçœŸå®çš„æˆªå›¾æå–æ•°æ®ï¼Œæ¶ˆé™¤è¯¯å¯¼æ€§æ¼”ç¤ºæ•°æ®ï¼Œæå‡ç³»ç»Ÿå¯ä¿¡åº¦å’Œç”¨æˆ·ä½“éªŒ
