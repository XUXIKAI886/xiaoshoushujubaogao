# ç¾å›¢å¤–å–åº—é“ºæ•°æ®åˆ†æç³»ç»Ÿ - æŠ€æœ¯æ–¹æ¡ˆè®¾è®¡

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„è®¾è®¡

### æ•´ä½“æ¶æ„
```
ç”¨æˆ·ç•Œé¢å±‚ (HTML + DaisyUI)
    â†“
ä¸šåŠ¡é€»è¾‘å±‚ (JavaScript)
    â†“
AIæœåŠ¡å±‚ (Gemini API)
    â†“
æ•°æ®å¯è§†åŒ–å±‚ (ECharts)
    â†“
æŠ¥å‘Šç”Ÿæˆå±‚ (HTML Generator)
```

### æŠ€æœ¯æ ˆè¯¦ç»†è¯´æ˜

#### å‰ç«¯æŠ€æœ¯æ ˆ
- **HTML5**: é¡µé¢ç»“æ„å’Œè¯­ä¹‰åŒ–æ ‡è®°
- **CSS3**: æ ·å¼å’ŒåŠ¨ç”»æ•ˆæœ
- **JavaScript (ES6+)**: ä¸šåŠ¡é€»è¾‘å’Œäº¤äº’å¤„ç†
- **Tailwind CSS**: åŸºç¡€æ ·å¼æ¡†æ¶
- **DaisyUI**: UIç»„ä»¶åº“ï¼Œæä¾›ç°ä»£åŒ–ç»„ä»¶
- **ECharts**: æ•°æ®å¯è§†åŒ–å›¾è¡¨åº“

#### APIé›†æˆ
- **Gemini 2.5 Flash Lite API**: å›¾åƒç†è§£å’Œæ•°æ®åˆ†æ
- **Base URL**: https://haxiaiplus.cn/v1/chat/completions
- **è®¤è¯æ–¹å¼**: Bearer Token (Authorizationå¤´éƒ¨)
- **è¯·æ±‚æ ¼å¼**: OpenAIå…¼å®¹æ ¼å¼
- **æ”¯æŒåŠŸèƒ½**: å¤šæ¨¡æ€è¾“å…¥ã€ç»“æ„åŒ–è¾“å‡ºã€æµå¼å“åº”

## ğŸ“ é¡¹ç›®æ–‡ä»¶ç»“æ„

```
meituan-data-analyzer/
â”œâ”€â”€ index.html              # ä¸»é¡µé¢
â”œâ”€â”€ css/
â”‚   â”œâ”€â”€ style.css          # è‡ªå®šä¹‰æ ·å¼
â”‚   â””â”€â”€ tailwind.min.css   # Tailwind CSS
â”œâ”€â”€ js/
â”‚   â”œâ”€â”€ main.js            # ä¸»è¦ä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ api.js             # APIè°ƒç”¨å°è£…
â”‚   â”œâ”€â”€ chart.js           # å›¾è¡¨ç”Ÿæˆé€»è¾‘
â”‚   â”œâ”€â”€ report.js          # æŠ¥å‘Šç”Ÿæˆé€»è¾‘
â”‚   â””â”€â”€ utils.js           # å·¥å…·å‡½æ•°
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ echarts.min.js     # EChartsåº“
â”‚   â””â”€â”€ daisyui.min.css    # DaisyUIæ ·å¼
â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ images/            # å›¾ç‰‡èµ„æº
â”‚   â””â”€â”€ icons/             # å›¾æ ‡èµ„æº
â””â”€â”€ README.md              # é¡¹ç›®è¯´æ˜
```

## ğŸ”§ æ ¸å¿ƒåŠŸèƒ½å®ç°æ–¹æ¡ˆ

### 1. åº—é“ºä¿¡æ¯è¾“å…¥æ¨¡å—

#### ç•Œé¢è®¾è®¡
```html
<div class="card bg-base-100 shadow-xl">
  <div class="card-body">
    <h2 class="card-title">åº—é“ºåŸºæœ¬ä¿¡æ¯</h2>
    <div class="form-control">
      <label class="label">åº—é“ºåç§°</label>
      <input type="text" class="input input-bordered" required>
    </div>
    <div class="form-control">
      <label class="label">ç»è¥å“ç±»</label>
      <select class="select select-bordered" required>
        <option>ä¸­å¼å¿«é¤</option>
        <option>è¥¿å¼å¿«é¤</option>
        <!-- æ›´å¤šé€‰é¡¹ -->
      </select>
    </div>
    <div class="form-control">
      <label class="label">åº—é“ºåœ°å€</label>
      <input type="text" class="input input-bordered" required>
    </div>
  </div>
</div>
```

#### æ•°æ®éªŒè¯
```javascript
function validateStoreInfo(data) {
  const errors = [];
  if (!data.name || data.name.length > 50) {
    errors.push('åº—é“ºåç§°å¿…å¡«ä¸”ä¸è¶…è¿‡50å­—ç¬¦');
  }
  if (!data.category) {
    errors.push('è¯·é€‰æ‹©ç»è¥å“ç±»');
  }
  if (!data.address || data.address.length > 100) {
    errors.push('åº—é“ºåœ°å€å¿…å¡«ä¸”ä¸è¶…è¿‡100å­—ç¬¦');
  }
  return errors;
}
```

### 2. å›¾ç‰‡ä¸Šä¼ æ¨¡å—

#### ä¸Šä¼ ç•Œé¢
```html
<div class="card bg-base-100 shadow-xl">
  <div class="card-body">
    <h2 class="card-title">ä¸Šä¼ åº—é“ºæ•°æ®æˆªå›¾</h2>
    <div class="upload-area border-2 border-dashed border-gray-300 rounded-lg p-8 text-center">
      <input type="file" id="imageUpload" accept="image/*" class="hidden">
      <div class="upload-content">
        <svg class="mx-auto h-12 w-12 text-gray-400">...</svg>
        <p>æ‹–æ‹½å›¾ç‰‡åˆ°æ­¤å¤„æˆ–ç‚¹å‡»ä¸Šä¼ </p>
        <p class="text-sm text-gray-500">æ”¯æŒ JPG, PNG, WEBP æ ¼å¼ï¼Œæœ€å¤§ 10MB</p>
      </div>
    </div>
    <div class="preview-area hidden">
      <img id="imagePreview" class="max-w-full h-auto rounded-lg">
    </div>
  </div>
</div>
```

#### å›¾ç‰‡å¤„ç†é€»è¾‘
```javascript
function handleImageUpload(file) {
  // æ–‡ä»¶å¤§å°æ£€æŸ¥
  if (file.size > 10 * 1024 * 1024) {
    throw new Error('æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡10MB');
  }
  
  // æ–‡ä»¶ç±»å‹æ£€æŸ¥
  const allowedTypes = ['image/jpeg', 'image/png', 'image/webp'];
  if (!allowedTypes.includes(file.type)) {
    throw new Error('åªæ”¯æŒ JPG, PNG, WEBP æ ¼å¼');
  }
  
  // è½¬æ¢ä¸ºbase64
  return new Promise((resolve, reject) => {
    const reader = new FileReader();
    reader.onload = e => resolve(e.target.result);
    reader.onerror = reject;
    reader.readAsDataURL(file);
  });
}
```

### 3. AIåˆ†ææ¨¡å—

#### APIè°ƒç”¨å°è£…
```javascript
class GeminiAPI {
  constructor(config = API_CONFIG) {
    this.baseUrl = config.baseUrl;
    this.apiKey = config.apiKey;
    this.model = config.model;
    this.temperature = config.temperature || 0.8;
    this.max_tokens = config.max_tokens || 16384;
  }

  async analyzeImage(imageBase64, storeInfo) {
    const prompt = this.buildAnalysisPrompt(storeInfo);

    const requestBody = {
      model: this.model,
      messages: [
        {
          role: "system",
          content: prompt
        },
        {
          role: "user",
          content: [
            {
              type: "text",
              text: "è¯·åˆ†æè¿™å¼ ç¾å›¢å¤–å–åº—é“ºæ•°æ®æˆªå›¾ï¼ŒæŒ‰ç…§è¦æ±‚æä¾›è¯¦ç»†çš„åˆ†ææŠ¥å‘Šã€‚"
            },
            {
              type: "image_url",
              image_url: {
                url: imageBase64
              }
            }
          ]
        }
      ],
      temperature: this.temperature,
      max_tokens: this.max_tokens
    };

    const response = await fetch(this.baseUrl, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${this.apiKey}`
      },
        body: JSON.stringify(requestBody)
      }
    );
    
    return await response.json();
  }
  
  buildAnalysisPrompt(storeInfo) {
    return `ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ç¾å›¢å¤–å–æ•°æ®åˆ†æå¸ˆã€‚è¯·åˆ†æä¸Šä¼ çš„åº—é“ºæ•°æ®æˆªå›¾ï¼Œæå–å…³é”®æ•°æ®å¹¶ç”Ÿæˆä¸“ä¸šåˆ†ææŠ¥å‘Šã€‚

åº—é“ºåŸºæœ¬ä¿¡æ¯ï¼š
- åº—é“ºåç§°ï¼š${storeInfo.name}
- ç»è¥å“ç±»ï¼š${storeInfo.category}
- åº—é“ºåœ°å€ï¼š${storeInfo.address}

è¯·ä»æˆªå›¾ä¸­æå–ä»¥ä¸‹æ•°æ®ï¼ˆå¦‚æœå¯è§ï¼‰ï¼š
1. é”€å”®æ•°æ®ï¼šè®¢å•é‡ã€é”€å”®é¢ã€å®¢å•ä»·ç­‰
2. è¯„ä»·æ•°æ®ï¼šè¯„åˆ†ã€è¯„ä»·æ•°é‡ã€å¥½è¯„ç‡ç­‰
3. è¿è¥æ•°æ®ï¼šè¥ä¸šæ—¶é—´ã€é…é€æ—¶é—´ã€æ´»åŠ¨ä¿¡æ¯ç­‰
4. å•†å“æ•°æ®ï¼šçƒ­é”€å•†å“ã€å•†å“åˆ†ç±»ã€ä»·æ ¼åˆ†å¸ƒç­‰

è¾“å‡ºæ ¼å¼è¦æ±‚ï¼š
è¯·ä»¥JSONæ ¼å¼è¿”å›åˆ†æç»“æœï¼ŒåŒ…å«ï¼š
{
  "extractedData": {
    "sales": {...},
    "ratings": {...},
    "operations": {...},
    "products": {...}
  },
  "analysis": {
    "strengths": [...],
    "weaknesses": [...],
    "recommendations": [...],
    "insights": [...]
  },
  "charts": [
    {
      "type": "bar|line|pie",
      "title": "å›¾è¡¨æ ‡é¢˜",
      "data": {...}
    }
  ]
}`;
  }
}
```

### 4. æ•°æ®å¯è§†åŒ–æ¨¡å—

#### EChartså›¾è¡¨ç”Ÿæˆ
```javascript
class ChartGenerator {
  constructor(containerId) {
    this.container = document.getElementById(containerId);
    this.chart = echarts.init(this.container);
  }
  
  generateBarChart(data) {
    const option = {
      title: {
        text: data.title,
        left: 'center'
      },
      tooltip: {
        trigger: 'axis'
      },
      xAxis: {
        type: 'category',
        data: data.categories
      },
      yAxis: {
        type: 'value'
      },
      series: [{
        data: data.values,
        type: 'bar',
        itemStyle: {
          color: '#3B82F6'
        }
      }]
    };
    
    this.chart.setOption(option);
  }
  
  generatePieChart(data) {
    const option = {
      title: {
        text: data.title,
        left: 'center'
      },
      tooltip: {
        trigger: 'item'
      },
      series: [{
        type: 'pie',
        radius: '50%',
        data: data.items,
        emphasis: {
          itemStyle: {
            shadowBlur: 10,
            shadowOffsetX: 0,
            shadowColor: 'rgba(0, 0, 0, 0.5)'
          }
        }
      }]
    };
    
    this.chart.setOption(option);
  }
}
```

### 5. æŠ¥å‘Šç”Ÿæˆæ¨¡å—

#### HTMLæŠ¥å‘Šæ¨¡æ¿
```javascript
class ReportGenerator {
  generateReport(analysisData, storeInfo) {
    const template = `
    <!DOCTYPE html>
    <html lang="zh-CN">
    <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>${storeInfo.name} - æ•°æ®åˆ†ææŠ¥å‘Š</title>
      <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
      <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    </head>
    <body class="bg-gray-50">
      <div class="container mx-auto px-4 py-8">
        ${this.generateHeader(storeInfo)}
        ${this.generateCharts(analysisData.charts)}
        ${this.generateAnalysis(analysisData.analysis)}
      </div>
      <script>
        ${this.generateChartScripts(analysisData.charts)}
      </script>
    </body>
    </html>`;
    
    return template;
  }
  
  generateHeader(storeInfo) {
    return `
    <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
      <h1 class="text-3xl font-bold text-gray-800 mb-4">${storeInfo.name} æ•°æ®åˆ†ææŠ¥å‘Š</h1>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div class="bg-blue-50 p-4 rounded-lg">
          <h3 class="font-semibold text-blue-800">åº—é“ºåç§°</h3>
          <p class="text-blue-600">${storeInfo.name}</p>
        </div>
        <div class="bg-green-50 p-4 rounded-lg">
          <h3 class="font-semibold text-green-800">ç»è¥å“ç±»</h3>
          <p class="text-green-600">${storeInfo.category}</p>
        </div>
        <div class="bg-purple-50 p-4 rounded-lg">
          <h3 class="font-semibold text-purple-800">åº—é“ºåœ°å€</h3>
          <p class="text-purple-600">${storeInfo.address}</p>
        </div>
      </div>
    </div>`;
  }
}
```

## ğŸ”’ å®‰å…¨æ€§è€ƒè™‘

### 1. æ•°æ®å®‰å…¨
- å›¾ç‰‡ä¸Šä¼ å‰è¿›è¡Œæ–‡ä»¶ç±»å‹å’Œå¤§å°éªŒè¯
- APIå¯†é’¥é€šè¿‡ç¯å¢ƒå˜é‡æˆ–é…ç½®æ–‡ä»¶ç®¡ç†
- ç”¨æˆ·ä¸Šä¼ çš„å›¾ç‰‡ä¸åœ¨æœåŠ¡å™¨ç«¯å­˜å‚¨

### 2. APIå®‰å…¨
- å®ç°è¯·æ±‚é¢‘ç‡é™åˆ¶
- æ·»åŠ é”™è¯¯é‡è¯•æœºåˆ¶
- æ•æ„Ÿä¿¡æ¯ä¸åœ¨å‰ç«¯æš´éœ²

### 3. è¾“å…¥éªŒè¯
- æ‰€æœ‰ç”¨æˆ·è¾“å…¥éƒ½è¿›è¡Œä¸¥æ ¼éªŒè¯
- é˜²æ­¢XSSæ”»å‡»
- å›¾ç‰‡å†…å®¹å®‰å…¨æ£€æŸ¥

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

### 1. å›¾ç‰‡å¤„ç†ä¼˜åŒ–
- å›¾ç‰‡å‹ç¼©å¤„ç†
- æ”¯æŒå¤šç§æ ¼å¼è½¬æ¢
- å¼‚æ­¥ä¸Šä¼ å¤„ç†

### 2. APIè°ƒç”¨ä¼˜åŒ–
- è¯·æ±‚ç¼“å­˜æœºåˆ¶
- è¶…æ—¶å¤„ç†
- é”™è¯¯é‡è¯•ç­–ç•¥

### 3. å‰ç«¯æ€§èƒ½ä¼˜åŒ–
- èµ„æºæ‡’åŠ è½½
- å›¾è¡¨æŒ‰éœ€æ¸²æŸ“
- ä»£ç åˆ†å‰²å’Œå‹ç¼©

## ğŸš€ éƒ¨ç½²æ–¹æ¡ˆ

### é™æ€éƒ¨ç½²
- æ”¯æŒGitHub Pageséƒ¨ç½²
- æ”¯æŒNetlify/Verceléƒ¨ç½²
- CDNåŠ é€Ÿé™æ€èµ„æº

### é…ç½®ç®¡ç†
- ç¯å¢ƒå˜é‡é…ç½®APIå¯†é’¥
- æ”¯æŒå¤šç¯å¢ƒé…ç½®
- é…ç½®æ–‡ä»¶æ¨¡æ¿åŒ–
