# APIä¿®å¤æ›´æ–°æ—¥å¿—

## ğŸ“… æ›´æ–°æ—¶é—´
**2024-01-15 - v1.4.0 APIæ ¼å¼ä¿®å¤ç‰ˆæœ¬**

## ğŸ” é—®é¢˜å‘ç°
ç”¨æˆ·å‘ç°APIè°ƒç”¨ä»£ç ä½¿ç”¨äº†é”™è¯¯çš„æ ¼å¼ï¼š
- åŸä»£ç ä½¿ç”¨GeminiåŸç”ŸAPIæ ¼å¼
- å®é™…åº”è¯¥ä½¿ç”¨OpenAIå…¼å®¹æ ¼å¼
- å¯¼è‡´APIè¿æ¥å¤±è´¥ï¼Œæ— æ³•è¿›è¡ŒçœŸå®AIåˆ†æ

## âœ… ä¿®å¤å†…å®¹

### 1. æ ¸å¿ƒæ–‡ä»¶ä¿®å¤

#### `js/api.js` - APIè°ƒç”¨æ ¸å¿ƒæ–‡ä»¶
**ä¿®å¤å‰**ï¼š
```javascript
const API_CONFIG = {
    baseUrl: 'https://haxiaiplus.cn',
    apiKey: 'sk-BIChztSl1gwRjl06f5DZ3J15UMnLGgEBpiJa00VHTsQeI00N',
    model: 'gemini-2.5-flash-lite-preview-06-17'
};

// GeminiåŸç”Ÿæ ¼å¼è¯·æ±‚
const response = await fetch(
    `${this.baseUrl}/v1beta/models/${this.model}:generateContent?key=${this.apiKey}`,
    {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
            system_instruction: { parts: [{ text: prompt }] },
            contents: [{ role: "user", parts: [...] }]
        })
    }
);
```

**ä¿®å¤å**ï¼š
```javascript
const API_CONFIG = {
    baseUrl: 'https://haxiaiplus.cn/v1/chat/completions',
    apiKey: 'sk-BIChztSl1gwRjl06f5DZ3J15UMnLGgEBpiJa00VHTsQeI00N',
    model: 'gemini-2.5-flash-lite-preview-06-17',
    temperature: 0.8,
    max_tokens: 16384,
    timeout: 360000
};

// OpenAIå…¼å®¹æ ¼å¼è¯·æ±‚
const response = await fetch(this.baseUrl, {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${this.apiKey}`
    },
    body: JSON.stringify({
        model: this.model,
        messages: [
            { role: "system", content: prompt },
            { role: "user", content: [...] }
        ],
        temperature: this.temperature,
        max_tokens: this.max_tokens
    })
});
```

### 2. æ–‡æ¡£æ›´æ–°

#### `README.md`
- âœ… æ›´æ–°APIé…ç½®ç¤ºä¾‹
- âœ… æ·»åŠ OpenAIå…¼å®¹æ ¼å¼è¯´æ˜
- âœ… å¢åŠ é…ç½®å‚æ•°è¯¦ç»†è¯´æ˜

#### `æ–‡æ¡£/é¡¹ç›®éœ€æ±‚åˆ†ææ¨¡æ¿.md`
- âœ… ä¿®æ­£APIé…ç½®è¦æ±‚
- âœ… æ›´æ–°æ¥å£æ ¼å¼è¯´æ˜
- âœ… æ·»åŠ è®¤è¯æ–¹å¼è¯´æ˜

#### `æ–‡æ¡£/æŠ€æœ¯æ–¹æ¡ˆè®¾è®¡.md`
- âœ… æ›´æ–°APIé›†æˆéƒ¨åˆ†
- âœ… ä¿®æ­£ä»£ç ç¤ºä¾‹
- âœ… å®Œå–„æŠ€æœ¯æ¶æ„è¯´æ˜

#### `éƒ¨ç½²æŒ‡å—.md`
- âœ… æ›´æ–°APIé…ç½®è¯´æ˜
- âœ… ä¿®æ­£ç¯å¢ƒå˜é‡ç¤ºä¾‹
- âœ… æ·»åŠ é…ç½®å‚æ•°è¯´æ˜

### 3. æ–°å¢å·¥å…·

#### `api-test.html` - APIæµ‹è¯•å·¥å…·
- âœ… é…ç½®æ˜¾ç¤ºåŠŸèƒ½
- âœ… åŸºç¡€è¿æ¥æµ‹è¯•
- âœ… æ–‡æœ¬åˆ†ææµ‹è¯•
- âœ… å›¾ç‰‡åˆ†ææµ‹è¯•
- âœ… æç¤ºè¯æµ‹è¯•

#### `api-config-check.html` - é…ç½®æ£€æŸ¥å·¥å…·
- âœ… å®æ—¶APIè¿æ¥æµ‹è¯•
- âœ… ç½‘ç»œè¿æ¥è¯Šæ–­
- âœ… è¯¦ç»†é”™è¯¯åˆ†æ
- âœ… è§£å†³æ–¹æ¡ˆå»ºè®®

## ğŸ”§ æŠ€æœ¯å˜æ›´è¯¦æƒ…

### APIç«¯ç‚¹å˜æ›´
```diff
- baseUrl: 'https://haxiaiplus.cn'
+ baseUrl: 'https://haxiaiplus.cn/v1/chat/completions'
```

### è®¤è¯æ–¹å¼å˜æ›´
```diff
- URLå‚æ•°: ?key=${apiKey}
+ Authorizationå¤´éƒ¨: Bearer ${apiKey}
```

### è¯·æ±‚æ ¼å¼å˜æ›´
```diff
- GeminiåŸç”Ÿæ ¼å¼:
  {
    system_instruction: { parts: [{ text: prompt }] },
    contents: [{ role: "user", parts: [...] }]
  }

+ OpenAIå…¼å®¹æ ¼å¼:
  {
    model: this.model,
    messages: [
      { role: "system", content: prompt },
      { role: "user", content: [...] }
    ],
    temperature: 0.8,
    max_tokens: 16384
  }
```

### å“åº”å¤„ç†å˜æ›´
```diff
- Geminiæ ¼å¼: result.candidates[0].content.parts[0].text
+ OpenAIæ ¼å¼: result.choices[0].message.content
```

## ğŸ§ª æµ‹è¯•éªŒè¯

### æµ‹è¯•å·¥å…·
1. **APIæµ‹è¯•é¡µé¢** (`api-test.html`)
   - åŸºç¡€è¿æ¥æµ‹è¯•
   - æ–‡æœ¬åˆ†ææµ‹è¯•
   - å›¾ç‰‡åˆ†ææµ‹è¯•
   - æç¤ºè¯ç”Ÿæˆæµ‹è¯•

2. **é…ç½®æ£€æŸ¥å·¥å…·** (`api-config-check.html`)
   - APIè¿æ¥è¯Šæ–­
   - ç½‘ç»œçŠ¶æ€æ£€æŸ¥
   - é”™è¯¯åˆ†æå’Œå»ºè®®

### æµ‹è¯•æ­¥éª¤
```bash
# 1. æµ‹è¯•APIè¿æ¥
open api-test.html
# ç‚¹å‡»"æµ‹è¯•åŸºç¡€è¿æ¥"

# 2. æµ‹è¯•è½¬åŒ–æ¼æ–—åŠŸèƒ½
open funnel-test.html
# å¼€å¯"çœŸå®AIåˆ†æ"å¼€å…³
# ä¸Šä¼ å›¾ç‰‡è¿›è¡Œåˆ†æ

# 3. éªŒè¯é…ç½®
open api-config-check.html
# è¿è¡Œå®Œæ•´è¯Šæ–­
```

## ğŸ“‹ å½±å“èŒƒå›´

### ä¿®å¤çš„åŠŸèƒ½
- âœ… APIè¿æ¥é—®é¢˜
- âœ… çœŸå®AIåˆ†æåŠŸèƒ½
- âœ… å›¾ç‰‡åˆ†æèƒ½åŠ›
- âœ… è½¬åŒ–æ¼æ–—æ•°æ®è¯†åˆ«
- âœ… æŠ¥å‘Šç”ŸæˆåŠŸèƒ½

### ä¸å—å½±å“çš„åŠŸèƒ½
- âœ… æ¼”ç¤ºæ¨¡å¼
- âœ… å›¾è¡¨ç”Ÿæˆ
- âœ… æŠ¥å‘Šå¯¼å‡º
- âœ… ä¸»é¢˜åˆ‡æ¢
- âœ… å“åº”å¼è®¾è®¡

## ğŸ¯ é¢„æœŸæ•ˆæœ

ä¿®å¤ååº”è¯¥èƒ½å¤Ÿï¼š
1. **æˆåŠŸè¿æ¥APIæœåŠ¡**
2. **æ­£å¸¸è¿›è¡Œå›¾ç‰‡åˆ†æ**
3. **è¯†åˆ«è½¬åŒ–æ¼æ–—æ•°æ®**
4. **ç”Ÿæˆä¸“ä¸šåˆ†ææŠ¥å‘Š**
5. **æ”¯æŒæ‰€æœ‰åŸæœ‰åŠŸèƒ½**

## ğŸ”„ å‡çº§æŒ‡å—

### å¯¹äºç°æœ‰ç”¨æˆ·
1. **æ›´æ–°ä»£ç æ–‡ä»¶**ï¼š
   - ä¸‹è½½æœ€æ–°çš„ `js/api.js` æ–‡ä»¶
   - æ›¿æ¢ç°æœ‰æ–‡ä»¶

2. **æ£€æŸ¥é…ç½®**ï¼š
   - ç¡®è®¤APIé…ç½®æ ¼å¼æ­£ç¡®
   - éªŒè¯APIå¯†é’¥æœ‰æ•ˆæ€§

3. **æµ‹è¯•åŠŸèƒ½**ï¼š
   - ä½¿ç”¨APIæµ‹è¯•å·¥å…·éªŒè¯è¿æ¥
   - æµ‹è¯•è½¬åŒ–æ¼æ–—åˆ†æåŠŸèƒ½

### å¯¹äºæ–°ç”¨æˆ·
1. **ç›´æ¥ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬**
2. **æŒ‰ç…§æ›´æ–°åçš„æ–‡æ¡£é…ç½®**
3. **ä½¿ç”¨æä¾›çš„æµ‹è¯•å·¥å…·éªŒè¯**

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### é—®é¢˜æ’æŸ¥
1. **ä½¿ç”¨APIæµ‹è¯•å·¥å…·**ï¼š`api-test.html`
2. **æŸ¥çœ‹é…ç½®æ£€æŸ¥å·¥å…·**ï¼š`api-config-check.html`
3. **å‚è€ƒè§£å†³æ–¹æ¡ˆæ–‡æ¡£**ï¼š`APIè¿æ¥é—®é¢˜å¿«é€Ÿè§£å†³æŒ‡å—.md`

### å¸¸è§é—®é¢˜
- **è¿æ¥å¤±è´¥**ï¼šæ£€æŸ¥ç½‘ç»œå’ŒAPIé…ç½®
- **æ ¼å¼é”™è¯¯**ï¼šç¡®è®¤ä½¿ç”¨OpenAIå…¼å®¹æ ¼å¼
- **è®¤è¯å¤±è´¥**ï¼šéªŒè¯APIå¯†é’¥å’ŒAuthorizationå¤´éƒ¨

## ğŸ·ï¸ ç‰ˆæœ¬æ ‡ç­¾

- **v1.4.0**: APIæ ¼å¼ä¿®å¤ç‰ˆæœ¬
- **å…³é”®è¯**: APIä¿®å¤ã€OpenAIå…¼å®¹ã€è¿æ¥é—®é¢˜è§£å†³
- **å…¼å®¹æ€§**: å‘åå…¼å®¹ï¼Œå»ºè®®å‡çº§

---

**é‡è¦æé†’**ï¼šæ­¤æ¬¡æ›´æ–°è§£å†³äº†APIè°ƒç”¨çš„æ ¹æœ¬é—®é¢˜ï¼Œå¼ºçƒˆå»ºè®®æ‰€æœ‰ç”¨æˆ·æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬ä»¥è·å¾—å®Œæ•´çš„åŠŸèƒ½ä½“éªŒã€‚
